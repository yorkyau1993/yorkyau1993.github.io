<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>全民防衛生存測驗 V8</title>
    
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@800;900&family=Noto+Sans+TC:wght@700;900&display=swap" rel="stylesheet">

    <style>
        :root {
            --theme-bg: #C04000;
            --theme-text-outside: #FFFFFF;
            --card-bg: #FFFFFF;
            --card-text: #000000;
            --card-border: #000000;
            --success-bg: #d4edda;
            --success-text: #155724;
            --error-bg: #f8d7da;
            --error-text: #721c24;
            --btn-bg: #000000;
            --btn-text: #FFFFFF;
            --bad-end-bg: #EE1C25; 
        }

        html, body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            min-height: 100%;
        }

        body {
            background-color: var(--theme-bg);
            color: var(--theme-text-outside);
            font-family: "Noto Sans TC", "Microsoft JhengHei", sans-serif;
            font-weight: 700; 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start; 
            transition: background-color 0.5s;
        }

        .container {
            width: 95%;
            max-width: 600px;
            min-height: 100vh;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            position: relative;
            padding: 40px 0;
            margin: 0 auto;
            justify-content: center;
        }

        /* --- RWD 電腦/平板版 橫向滿版設定 --- */
        @media (min-width: 800px) {
            .container { max-width: 1200px; }
            
            .quiz-layout { 
                flex-direction: row !important; 
                align-items: stretch; 
                height: 65vh; 
                min-height: 500px;
            }
            
            .options-side { 
                grid-template-columns: 1fr 1fr !important; 
                grid-template-rows: 1fr 1fr !important; 
                height: 100%; 
            }
            
            .result-layout { flex-direction: row !important; align-items: flex-start; }
            h1 { margin-top: 20px; font-size: 3rem; }
        }

        /* --- 字體與通用 --- */
        h1 {
            color: var(--theme-text-outside);
            font-size: 2.2rem;
            margin: 0 0 10px 0;
            text-shadow: 3px 3px 0px rgba(0,0,0,0.2);
            line-height: 1.2;
            text-align: center;
            font-family: "M PLUS Rounded 1c", sans-serif;
        }
        
        p.subtitle {
            color: var(--theme-text-outside);
            font-size: 1.2rem;
            margin-top: 0;
            margin-bottom: 20px;
            opacity: 0.9;
            text-align: center;
        }

        body.bad-end { background-color: var(--bad-end-bg); }
        .bad-font-style { font-family: "SimHei", "Microsoft YaHei", sans-serif !important; }

        .screen { display: none; width: 100%; animation: fadeIn 0.4s ease; flex-direction: column; align-items: center; }
        .screen.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .card-box {
            background: var(--card-bg);
            color: var(--card-text);
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            border: 3px solid var(--card-border);
            box-shadow: 6px 6px 0px rgba(0,0,0,0.8);
            box-sizing: border-box;
            font-size: 1.1rem;
            width: 100%;
            position: relative;
        }

        /* --- 輸入欄位 --- */
        .input-group { margin: 15px 0; text-align: left; }
        .input-group label { display: block; margin-bottom: 8px; font-size: 1.1rem; font-weight: 900; }
        .input-name {
            width: 100%; padding: 15px; border: 2px solid var(--card-border); border-radius: 10px;
            background: #f9f9f9; color: var(--card-text); font-size: 1.2rem; font-weight: bold;
            box-sizing: border-box; outline: none; font-family: inherit;
        }
        .input-name:focus { box-shadow: 3px 3px 0px rgba(0,0,0,1); background: #fff; }

        /* 錯誤提示 */
        .error-msg {
            color: #ffcccc; background: #a00; padding: 5px 10px; border-radius: 5px;
            font-size: 1rem; margin-bottom: 15px; display: none; font-weight: bold;
            text-align: center; border: 1px solid #f00; animation: shake 0.3s;
        }
        @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } 100% { transform: translateX(0); } }

        /* --- 按鈕 --- */
        .mode-select-btn { flex:1; text-align:center; padding:12px; font-family: inherit; border-radius: 10px; font-size: 1.1rem; cursor: pointer; border: 2px solid #000; background: #fff;}
        .mode-select-btn.selected { background: #000; color: #fff; }

        .start-btn-group { display: flex; flex-direction: column; gap: 15px; margin-top: 10px; }
        .btn-start {
            padding: 15px; border-radius: 50px; border: 3px solid #fff;
            font-size: 1.3rem; font-weight: 900; cursor: pointer; box-shadow: 4px 4px 0 rgba(0,0,0,0.3);
            transition: 0.1s; font-family: inherit; text-align: center; position: relative;
        }
        .btn-start:active { transform: translate(2px, 2px); box-shadow: 1px 1px 0 rgba(0,0,0,0.3); }
        
        .btn-personal { background: #000; color: #fff; }
        .btn-challenge { background: #d00; color: #fff; border-color: #fff; }
        .btn-school { background: #fff; color: #000; border-color: #000; }

        /* --- 測驗畫面 --- */
        .quiz-layout {
            display: flex; flex-direction: column; gap: 20px; width: 100%;
        }
        .question-side { flex: 1; display: flex; flex-direction: column; }
        
        .options-side { 
            flex: 1; display: grid; 
            grid-template-columns: 1fr; 
            gap: 15px; 
            box-sizing: border-box;
            align-content: stretch; 
        } 

        .question-card { 
            height: 100%; 
            display: flex; flex-direction: column; 
            justify-content: center; align-items: flex-start; text-align: left; 
            padding: 30px; font-size: 1.6rem; flex: 1;
        }
        .q-cat-label { background: #000; color: #fff; padding: 5px 15px; border-radius: 20px; font-size: 1rem; margin-bottom: 15px; display: inline-block;}
        
        .option-btn {
            background: #fff; border: 3px solid #000; border-radius: 15px; padding: 20px; color: #000;
            cursor: pointer; position: relative; font-weight: bold; font-size: 1.4rem;
            box-shadow: 4px 4px 0px rgba(0,0,0,0.1); text-align: center; transition: 0.1s;
            display: flex; align-items: center; justify-content: center; 
            width: 100%; height: 100%; box-sizing: border-box;
        }
        .option-btn:active { transform: translate(2px, 2px); box-shadow: 1px 1px 0px rgba(0,0,0,0.2); }
        .option-btn.correct { background: var(--success-bg); border-color: #006400; color: #004d00; }
        .option-btn.wrong { background: var(--error-bg); border-color: #8b0000; color: #8b0000; opacity: 0.8; }

        /* --- 彈跳解析 --- */
        #feedback-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85); z-index: 999; justify-content: center; align-items: center;
            animation: fadeIn 0.2s;
        }
        .feedback-box {
            background: #fff; color: #000; padding: 30px; width: 85%; max-width: 700px;
            border-radius: 20px; border: 5px solid #000; text-align: center;
            box-shadow: 0 0 50px rgba(0,0,0,0.8); position: relative;
            max-height: 85vh; overflow-y: auto;
        }
        #feedback-title { font-size: 2.2rem; margin: 0 0 15px 0; font-weight: 900; color: #000; }
        
        .consequence-box {
            background: #300; color: #ffcccc; padding: 15px; border-radius: 10px; margin-bottom: 15px; 
            border: 3px solid #ff0000; font-weight: bold; font-size: 1.2rem; line-height: 1.4;
            text-align: left; box-shadow: inset 0 0 20px #000;
        }
        #feedback-content { font-size: 1.2rem; line-height: 1.6; margin-bottom: 20px; text-align: left; background: #f0f0f0; padding: 20px; border-radius: 15px; border-left: 8px solid #000; }
        .next-q-btn { background: #000; color: #fff; border: none; padding: 12px 40px; font-size: 1.4rem; font-weight: 900; border-radius: 50px; cursor: pointer; width: 100%; }

        /* --- 結果畫面 --- */
        .result-layout { display: flex; flex-direction: column; gap: 20px; width: 100%; align-items: center;}
        .result-left { width: 100%; }
        .result-right { width: 100%; display: flex; flex-direction: column; gap: 10px; align-items: center; }

        .rank-badge { background: #000; color: #fff; padding: 5px 20px; border-radius: 30px; font-size: 1.1rem; margin-bottom: 10px; display: inline-block;}
        .score-display { font-size: 5rem; font-weight: 900; margin: 5px 0; line-height: 1; }
        
        /* 模擬印章 */
        .stamp-seal {
            position: absolute; top: 20px; right: 20px;
            border: 5px double; font-size: 1.8rem; font-weight: 900;
            padding: 8px 20px; transform: rotate(-15deg);
            border-radius: 10px; opacity: 0.8; text-transform: uppercase; letter-spacing: 2px;
            mix-blend-mode: multiply; pointer-events: none; z-index: 10;
        }
        .stamp-pass { color: #006400; border-color: #006400; } 
        .stamp-fail { color: #d00; border-color: #d00; }       

        /* 按鈕 */
        .btn-action {
            display: flex; justify-content: center; align-items: center;
            background: #000; color: #fff; border: 2px solid #fff;
            border-radius: 50px; padding: 12px; font-size: 1.1rem; font-weight: 900; cursor: pointer;
            width: 100%; margin-bottom: 5px; text-decoration: none; text-align: center;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.3); transition: 0.1s; font-family: inherit;
            max-width: 400px;
        }
        .btn-action:active { transform: translate(2px, 2px); box-shadow: 1px 1px 0 rgba(0,0,0,0.3); }
        .btn-secondary { background: #fff; color: #000; border: 2px solid #000; }
        .btn-link { background: #0056b3; color: #fff; border: 2px solid #fff; margin: 0 auto 10px auto; }
        
        /* 音效按鈕 */
        .btn-audio { 
            background: #f0f0f0; color: #333; border: 1px solid #999; 
            font-size: 1rem; padding: 10px 20px; width: auto; display: inline-block;
            margin-top: 10px; border-radius: 30px; cursor: pointer; font-weight: bold;
            box-shadow: 2px 2px 0 rgba(0,0,0,0.2); transition: 0.1s;
        }
        .btn-audio:hover { background: #fff; transform: translateY(-2px); }
        .btn-audio:active { transform: translateY(1px); box-shadow: 0 0 0; }

        /* --- 錯題解析 (知錯能改) --- */
        .review-list { width: 100%; max-width: 800px; margin-bottom: 20px; padding: 0 15px; box-sizing: border-box; }
        .review-item { 
            background: #fff; border: 2px solid #000; border-radius: 10px; padding: 15px; margin-bottom: 10px; 
            color: #000; text-align: left; box-shadow: 3px 3px 0 rgba(0,0,0,0.1);
        }
        .review-ans { color: #fff; background: #000; padding: 5px 10px; margin-top: 8px; border-radius: 5px; font-weight: bold; display: inline-block;}
        .review-desc { background: #f0f0f0; padding: 10px; margin-top: 10px; border-radius: 5px; font-size: 0.95rem; line-height: 1.5; color: #333; }

        /* --- Footer --- */
        .footer { margin-top: 30px; text-align: center; color: #fff; padding-bottom: 20px;}
        .footer p { margin: 5px 0; opacity: 0.8; font-size: 0.9rem; }
        
        /* 小 Threads 按鈕 */
        .btn-mini {
            display: inline-block; font-size: 0.8rem; padding: 5px 10px;
            border: 1px solid #fff; color: #fff; border-radius: 15px;
            text-decoration: none; margin-top: 5px; background: rgba(0,0,0,0.2);
        }
        .btn-mini:hover { background: #000; }

        .school-input-group { display: none; }
        
        /* 截圖區域設定 - 增加 Padding 讓白色卡片變小 */
        .export-wrapper { 
            padding: 60px 40px; /* 上下60, 左右40 */
            border-radius: 20px; 
            background: inherit; 
            width: 100%; 
            box-sizing: border-box; 
            position: relative;
        }
        
        /* Toast */
        .toast { 
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); 
            background: #000; color: #fff; padding: 15px 30px; 
            display: none; border-radius: 30px; font-size: 1.2rem; border: 2px solid #fff; z-index: 9999; 
        }
    </style>
</head>
<body>

<div class="container">
    
    <div id="screen-start" class="screen active">
        <div class="start-content" style="width:100%; max-width:500px;">
            <h1>🛡️ 全民防衛生存測驗</h1>
            <p class="subtitle">做好準備，保護自己！</p>

            <div class="card-box login-box">
                <div id="start-error" class="error-msg"></div>

                <div class="input-group">
                    <label>👤 名字 / 代號 (必填)</label>
                    <input type="text" id="player-name" class="input-name" placeholder="例如：阿吉" maxlength="15">
                </div>

                <div style="text-align:left; margin-bottom:20px;">
                    <label style="display:block; margin-bottom:8px; font-weight:900;">題目數量</label>
                    <div style="display:flex; gap:10px;">
                        <button onclick="selectCount(10)" class="mode-select-btn selected" id="btn-c-10">10 題</button>
                        <button onclick="selectCount(20)" class="mode-select-btn" id="btn-c-20">20 題</button>
                        <button onclick="selectCount(50)" class="mode-select-btn" id="btn-c-50">50 題</button>
                    </div>
                </div>

                <div class="start-btn-group">
                    <button class="btn-start btn-personal" onclick="startGame('personal')">📖 個人練習版<br><span style="font-size:0.9rem; font-weight:normal;">(手機直排・含解析)</span></button>
                    <button class="btn-start btn-challenge" onclick="startGame('challenge')">⚡ 極速挑戰版<br><span style="font-size:0.9rem; font-weight:normal;">(手機直排・無解析)</span></button>
                    <button class="btn-start btn-school" onclick="toSchoolScreen()">🏫 學校教學版<br><span style="font-size:0.9rem; font-weight:normal;">(點擊進入登入頁)</span></button>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>遊戲製作: 阿吉 YORK ( V8版 )</p>
            <a href="https://www.threads.net/@yorkwwwwong" target="_blank" class="btn-mini">👉 追蹤 YORK (Threads)</a>
        </div>
    </div>

    <div id="screen-school-login" class="screen">
        <div class="start-content" style="width:100%; max-width:500px;">
            <h1>🏫 學校教學模式</h1>
            <p class="subtitle">團體競賽・成績結算</p>

            <div class="card-box login-box">
                <div id="school-error" class="error-msg"></div>

                <div class="input-group">
                    <label>🏫 學校名稱 (必填)</label>
                    <input type="text" id="player-school" class="input-name" placeholder="例如：建國中學" maxlength="20">
                </div>

                <div class="input-group">
                    <label>🚩 隊名 / 代表人 (必填)</label>
                    <input type="text" id="player-team" class="input-name" placeholder="例如：第一小隊 / 王小明" maxlength="15">
                </div>

                <div style="text-align:left; margin-bottom:20px;">
                    <label style="display:block; margin-bottom:8px; font-weight:900;">題目數量</label>
                    <div style="display:flex; gap:10px;">
                        <button onclick="selectCount(10)" class="mode-select-btn selected" id="sch-btn-c-10">10 題</button>
                        <button onclick="selectCount(20)" class="mode-select-btn" id="sch-btn-c-20">20 題</button>
                        <button onclick="selectCount(50)" class="mode-select-btn" id="sch-btn-c-50">50 題</button>
                    </div>
                </div>

                <div class="start-btn-group">
                    <button class="btn-start btn-personal" onclick="startGame('school')">🚀 開始測驗</button>
                    <button class="btn-start btn-secondary" onclick="backToStart()">🔙 返回首頁</button>
                </div>
            </div>
        </div>
    </div>

    <div id="screen-quiz" class="screen">
        <div style="width: 100%; max-width: 1200px;">
            <div style="display:flex; justify-content:space-between; color:#fff; font-weight:bold; margin-bottom:10px; padding:0 10px;">
                <span id="quiz-player-name">Player</span>
                <span id="quiz-progress">1 / 10</span>
            </div>

            <div class="quiz-layout">
                <div class="question-side">
                    <div class="card-box question-card">
                        <span class="q-cat-label" id="q-cat">類別</span>
                        <div id="q-text">題目載入中...</div>
                    </div>
                </div>
                <div id="options-list" class="options-side"></div>
            </div>
        </div>
    </div>

    <div id="feedback-modal">
        <div class="feedback-box">
            <div id="feedback-title"></div>
            <div id="consequence-area"></div> 
            <div id="feedback-content"></div>
            <button class="next-q-btn" onclick="nextQuestion()">➡️ 下一題</button>
        </div>
    </div>

    <div id="screen-result-good" class="screen">
        <div class="result-layout">
            <div class="result-left">
                <div id="export-good" class="export-wrapper">
                    <h1>🛡️ 全民防衛生存測驗</h1>
                    <div class="card-box result-good" id="card-good" style="border-color:#000;">
                        <div class="stamp-seal stamp-pass">合格認證</div>
                        <div class="rank-badge">合格生存者</div>
                        <div class="score-display" id="score-good">100</div>
                        <h2 id="rank-good" style="margin:0; font-size: 1.8rem; color:#000;">傳奇指揮官</h2>
                        
                        <div style="font-size:1.2rem; margin:15px 0; font-weight: 900; color:#000; line-height:1.4;">
                            <span id="school-good" style="display:none; font-size:1.1rem; opacity:0.8; margin-bottom:5px;"></span>
                            <span id="name-good" style="border-bottom:3px solid #000; padding-bottom:3px; font-size:1.5rem;">XXX</span> 閣下
                        </div>
                        
                        <p id="msg-good" style="font-size:1.1rem; margin:15px 0; font-weight: bold; opacity:0.8; color:#000;">
                            你的防災意識極佳<br>是國家安全的基石！
                        </p>
                        <div style="border-top:2px solid #000; padding-top:10px; font-size:1rem; display:flex; justify-content:space-between; font-weight: bold;">
                            <span>答對: <b id="correct-good">0</b></span>
                            <span>耗時: <b id="time-good">0s</b></span>
                        </div>
                    </div>
                    <div style="text-align: center; color: #fff; font-weight: bold; margin-top:10px; font-size:0.8rem;">遊戲製作: 阿吉 YORK</div>
                </div>
                <div style="text-align: center; margin-top: 15px;">
                    <button class="btn-audio" style="background:#e6fffa; color:#006400; border-color:#006400;" onclick="fireworksEffect()">👏 給自己掌聲</button>
                    <br>
                    <a href="https://www.threads.net/@yorkwwwwong" target="_blank" class="btn-mini">👉 追蹤 YORK (Threads)</a>
                </div>
            </div>
            
            <div class="result-right">
                <a href="https://reurl.cc/Zl1Rxl" target="_blank" class="btn-action btn-link">當危機來臨時：臺灣全民安全指引</a>
                <button class="btn-action" onclick="downloadImage('export-good', '#C04000')">📸 下載戰報圖片</button>
                <button id="btn-csv-good" class="btn-action btn-secondary" style="display:none;" onclick="downloadCSV()">📥 下載答題明細 (.csv)</button>
                <button class="btn-action btn-secondary" onclick="showReview()">📖 知錯能改 (查看解析)</button>
                <button class="btn-action btn-secondary" onclick="location.reload()">🔄 重新測驗</button>
            </div>
        </div>
    </div>

    <div id="screen-result-bad" class="screen bad-font-style">
        <div class="result-layout">
            <div class="result-left">
                <div id="export-bad" class="export-wrapper">
                    <h1 class="bad-font-style">🛡️ 全民防卫生存测验</h1>
                    <div class="card-box result-bad" id="card-bad" style="border-color:#000;">
                        <div class="stamp-seal stamp-fail">統一功臣</div>
                        <div style="font-size:1.1rem; letter-spacing:1px; margin-bottom:5px; font-weight: 900; color:#000;">生存智商指数</div>
                        <div class="bad-score" id="score-bad" style="font-size:4rem; font-weight:900; color:#000;">40</div>
                        <h2 style="margin:0; font-size: 1.8rem; color:#000;">高度嘉奖</h2>
                        <div style="font-size:1.2rem; line-height:1.5; margin:15px 0; font-weight: 900; color:#000;">
                            <span id="school-bad" style="display:none; font-size:1.1rem; opacity:0.8; margin-bottom:5px;"></span>
                            <span id="name-bad" style="border-bottom:3px solid #000; padding-bottom:3px; font-size:1.5rem;">XXX</span> 同志：<br>
                            感谢您对祖国统一大业的贡献！<br>
                            您极度薄弱的防灾意识，<br>
                            将为我军节省大量的攻台弹药。
                        </div>
                        <div style="font-size:0.9rem; margin-top:10px; font-weight: bold; color:#000;">战区接收工作委员会 致赠</div>
                    </div>
                    <div style="text-align: center; color: #fff; font-weight: bold; margin-top:10px; font-size:0.8rem;">游戏制作: 阿吉 YORK</div>
                </div>
                <div style="text-align: center; margin-top: 15px;">
                    <button class="btn-audio" style="background:#fee; color:#d00; border-color:#d00;" onclick="starsEffect()">🇨🇳 党的回馈</button>
                    <br>
                    <a href="https://www.threads.net/@yorkwwwwong" target="_blank" class="btn-mini">👉 追蹤 YORK (Threads)</a>
                </div>
            </div>

            <div class="result-right">
                <a href="https://reurl.cc/Zl1Rxl" target="_blank" class="btn-action btn-link">當危機來臨時：臺灣全民安全指引</a>
                <button class="btn-action" onclick="downloadImage('export-bad', '#EE1C25')">📸 下载感谢状</button>
                <button id="btn-csv-bad" class="btn-action btn-secondary" style="display:none;" onclick="downloadCSV()">📥 下载详细报表 (.csv)</button>
                <button class="btn-action btn-secondary" onclick="showReview()">📖 知错能改 (查看解析)</button>
                <button class="btn-action btn-secondary" onclick="location.reload()">🔄 重新学习</button>
            </div>
        </div>
    </div>

    <div id="screen-review" class="screen" style="justify-content: flex-start; overflow-y: auto; padding-top: 20px;">
        <h1>📖 知錯能改</h1>
        <div id="review-list" class="review-list"></div>
        <button class="btn-action btn-secondary" style="max-width:300px; margin-bottom: 30px;" onclick="backToResult()">🔙 返回結果</button>
    </div>

</div>

<div id="toast" class="toast">圖片已下載！</div>

<script>
    const GOOGLE_FORM_URL = "https://docs.google.com/forms/d/e/1FAIpQLSdW4Pn6_2RY0Fjdm4VjtnRBLsyBOwCHXxN6Ydt8uCb9Htb-CQ/formResponse";
    const ENTRY_ID_NAME = "entry.2026948411";
    const ENTRY_ID_SCORE = "entry.613612201";
    const ENTRY_ID_RANK = "entry.1097894505";
    const ENTRY_ID_WRONG = "entry.2029704736";
    const ENTRY_ID_TIME = "entry.603554255";
    const ENTRY_ID_SCHOOL = "entry.1859416093"; 

    // 完整題庫
    const fullDB = [
        { c: "基礎知識", q: "《當危機來臨時》手冊的主要目的為何？", a: "保障民眾在危機來臨時能自救、互救、正確應變", w: ["教導民眾如何購買槍枝", "讓政府全權負責救援", "推廣觀光旅遊"], desc: "這本手冊將提供每位民眾重要的安全指引，讓我們學習如何保護彼此，守護心愛的家園。", bad: "💀 嚴重後果：你因為只會等待政府救援，在救援抵達前就因為無法自救而喪命。" },
        { c: "基礎知識", q: "台灣常見的自然災害有哪些？", a: "地震、颱風、豪雨、土石流、乾旱", w: ["龍捲風、暴風雪、火山爆發", "沙漠化、冰雹、極光", "海嘯、龍捲風、沙塵暴"], desc: "台灣位於環太平洋地震帶，且地處副熱帶，常面臨地震、颱風、豪雨、乾旱與土石流等天然災害。", bad: "💀 嚴重後果：你把時間花在準備雪衣和防沙漠化裝備，結果被颱風和豪雨困在家裡餓死。" },
        { c: "基礎知識", q: "為何需要平時儲備物資？", a: "讓危機時不慌亂、確保生命維持基本需求", w: ["為了應付政府檢查", "為了轉賣獲利", "因為錢沒地方花"], desc: "平時先做好準備，危急時刻才能不慌不忙，確保生命維持基本需求。", bad: "💀 嚴重後果：災難發生後你家裡只有空氣，三天後你因飢餓而被迫喝馬桶水。" },
        { c: "基礎知識", q: "為什麼在危機來臨時容易產生焦慮？", a: "對未知威脅的恐懼、生活失序、資訊過載", w: ["因為沒有手機玩", "因為肚子餓", "因為天氣太熱"], desc: "遭遇重大災變或軍事侵略，容易讓人產生心理壓力，出現緊張、焦慮、害怕等反應。", bad: "💀 嚴重後果：你因為無法理解焦慮來源，在恐慌中做出錯誤判斷，導致自己陷入險境。" },
        { c: "基礎知識", q: "台灣地理位置為何使其容易遭受地震？", a: "位於環太平洋地震帶", w: ["位於大西洋中洋脊", "因為地殼太薄", "因為氣候變遷"], desc: "臺灣位於環太平洋地震帶，因此時常遭遇地震。", bad: "💀 嚴重後果：你完全忽視地震風險，把重物放在床頭櫃，地震一來直接被砸暈。" },
        { c: "基礎知識", q: "我們應如何提升防災知識？", a: "學習防災課程、參加防災士訓練、詳讀政府指南", w: ["看科幻電影", "玩生存遊戲", "相信網路謠言"], desc: "可以報名參加防災士訓練，成為防災士，有助於在危機時保護家人。", bad: "💀 嚴重後果：你相信網路謠言用保鮮膜包頭可以防災，結果導致缺氧昏迷。" },
        { c: "基礎知識", q: "為何強調「有準備，更安全」？", a: "防止恐慌、提升生存能力、減少災害影響", w: ["為了嚇唬民眾", "為了增加消費", "單純的口號"], desc: "在充滿挑戰的時代，我們的安全建構在平時就做好準備的決心。「有準備，更安全」。", bad: "💀 嚴重後果：你毫無準備，災害來臨時只能在角落發抖，生存機率歸零。" },
        { c: "基礎知識", q: "哪些政府單位共同參與此手冊內容編制？", a: "國防部、內政部、教育部等跨部會", w: ["只有國防部", "只有消防署", "民間企業"], desc: "本手冊諮詢機關包含內政部、國防部、教育部、經濟部、衛福部等跨部會單位。", bad: "💀 嚴重後果：你找錯單位求助，在通訊中斷時浪費了寶貴的求生黃金時間。" },
        { c: "基礎知識", q: "什麼是「安全意志」？", a: "面對威脅仍願意防衛與保護家園的意志", w: ["購買高額保險", "立刻投降", "依賴外國救援"], desc: "我們的安全，建構在堅定的防衛意志與平時就做好準備的決心。", bad: "💀 嚴重後果：你選擇放棄抵抗，結果在敵軍佔領後失去了所有自由與財產。" },
        { c: "基礎知識", q: "為什麼災害時「互助」比「等待救援」重要？", a: "救援量能有限，民眾須先保護自己與周遭的人", w: ["因為救援要收費", "因為政府不會來", "因為互助比較好玩"], desc: "危機來臨時，救護人員可能有更多任務，因此我們必須學會簡單的自救、互救能力。", bad: "💀 嚴重後果：你呆坐在原地等待救援，結果錯過了逃生的機會，被瓦礫堆掩埋。" },
        { c: "基礎知識", q: "民防系統的標誌通常是什麼形狀與顏色？", a: "橘色背景上的藍色三角形", w: ["紅色圓形", "黑色十字", "黃色星星"], desc: "這通常是國際通用的民防識別標誌。", bad: "💀 嚴重後果：你認錯標誌，跑到了危險物品儲存區，結果遭遇二次爆炸。" },
        { c: "基礎知識", q: "遭遇複合式災害（如地震引發火災）時，應變首要原則？", a: "先確保自身安全，再進行滅火或救人", w: ["先搶救財物", "先拍照打卡", "不顧一切衝進火場"], desc: "手冊強調自救與互救，首要保護自己，才能協助他人。", bad: "💀 嚴重後果：你為了搶救PS5衝進火場，結果吸入濃煙嗆傷，倒在門口。" },
        { c: "基礎知識", q: "什麼是T-CERT？", a: "台灣民間自主緊急應變隊", w: ["台灣電腦緊急應變小組", "台灣認證中心", "台灣觀光協會"], desc: "手冊中鼓勵民眾參加「防災士」訓練，這是社區防救災的重要力量。", bad: "💀 嚴重後果：你需要急救支援時找錯了單位，對方問你要不要參加觀光旅遊團。" },
        { c: "居家儲備", q: "每人每日至少應準備多少飲用水？", a: "3公升", w: ["500cc", "10公升", "有喝飲料就好"], desc: "手冊建議每人每日至少準備 3 公升的飲用水。", bad: "💀 嚴重後果：你只準備了500cc的水，第一天就喝完，第三天因嚴重脫水而休克。" },
        { c: "居家儲備", q: "請列出基本食品儲備項目？", a: "飲用水、泡麵、罐頭、餅乾", w: ["生鮮牛排、生魚片", "大量冰淇淋", "只有白米"], desc: "建議儲備泡麵、乾麵、米、罐頭、餅乾、巧克力等較不易腐壞的食物。", bad: "💀 嚴重後果：斷電後冰箱失效，你的牛排和生魚片全部腐爛，你因食物中毒而死。" },
        { c: "居家儲備", q: "關於「循環儲備」的概念，下列何者正確？", a: "日常多買一點，先買先用，隨時回補", w: ["買來鎖在倉庫直到過期", "只有颱風天去搶購", "只買罐頭"], desc: "採用循環儲備方式，平時多買一點，先買的先用，隨時補充，讓防災簡單無負擔。", bad: "💀 嚴重後果：你的罐頭全部過期五年，吃了之後上吐下瀉，在缺水時加速脫水。" },
        { c: "居家儲備", q: "為何需要準備少量現金？", a: "停電時電子支付與ATM可能無法運作", w: ["為了賄賂救援人員", "因為現金比較輕", "當作燃料生火"], desc: "停電或網路中斷時，提款機運作可能受阻，因此建議隨時備有少量現金。", bad: "💀 嚴重後果：停電時你拿著手機想用LinePay，結果老闆只收現金，你只能看著最後一包米被買走。" },
        { c: "居家儲備", q: "停電後，下列哪個設備通常會「失效」？", a: "電子鎖與電梯", w: ["傳統機械鎖", "瓦斯爐", "手電筒"], desc: "電動鐵捲門、電子鎖、對講機鎖、電梯等，都可能在停電時失效。", bad: "💀 嚴重後果：你被困在20樓的電梯裡，手機沒訊號，叫天天不應叫地地不靈。" },
        { c: "居家儲備", q: "寵物的儲備物資至少應包含？", a: "飼料、水、排泄用品、項圈", w: ["玩具、零食", "漂亮的衣服", "化妝品"], desc: "寵物用品應包含寵物食品、水、項圈牽繩、排泄用品等。", bad: "💀 嚴重後果：你的寵物因為沒水喝而抓狂，把你當成水源攻擊。" },
        { c: "居家儲備", q: "長者應特別準備哪些用品？", a: "助聽器電池、假牙清潔劑、慢性病藥", w: ["電動玩具", "高跟鞋", "啞鈴"], desc: "年長者應準備助聽器電池、假牙清潔劑，以及慢性病藥等常備藥品。", bad: "💀 嚴重後果：長輩因為沒藥吃導致慢性病發作，在醫療系統癱瘓時無法送醫。" },
        { c: "居家儲備", q: "疫情流行時，需要哪些衛生物品？", a: "口罩、酒精、消毒紙巾", w: ["香水", "面膜", "髮膠"], desc: "衛生用品應包含口罩、酒精噴霧、消毒濕紙巾等。", bad: "💀 嚴重後果：你用香水代替酒精消毒，結果細菌感染，傷口化膿惡化。" },
        { c: "居家儲備", q: "儲備生活用品的主要目的？", a: "確保生活基本需求、避免危機時冒險外出", w: ["為了囤積居奇", "為了炫耀", "為了好玩"], desc: "日常的居家儲備建議最少準備一週份量，以備不時之需。", bad: "💀 嚴重後果：因為家裡沒衛生紙，你冒險外出搶購，結果在路上被暴徒攻擊。" },
        { c: "居家儲備", q: "建議儲備物資的份量至少能維持多久？", a: "至少3天，建議1週以上", w: ["半天", "1個月", "半年"], desc: "手冊建議日常居家儲備最少準備一週的份量。", bad: "💀 嚴重後果：你只準備半天的食物，第二天開始你就必須喝雨水維生。" },
        { c: "居家儲備", q: "蜂蜜在儲備物資中的優點？", a: "保存期限極長且提供高熱量", w: ["可以拿來敷臉", "比較便宜", "不會長螞蟻"], desc: "雖然手冊未明寫蜂蜜，但建議儲備糖、巧克力等高熱量且易保存的食物。", bad: "💀 嚴重後果：你儲備了低熱量的減肥餐，結果在逃難時因為熱量不足體力透支倒下。" },
        { c: "居家儲備", q: "為何要儲備鹽巴？", a: "補充身體電解質與保存食物", w: ["驅魔避邪", "洗澡用", "無聊時玩"], desc: "手冊建議儲備鹽、糖等調味料。", bad: "💀 嚴重後果：你因為電解質失衡而肌肉抽筋，無法逃離危險區域。" },
        { c: "居家儲備", q: "緊急照明不建議使用蠟燭的原因？", a: "容易引發火災且消耗氧氣", w: ["亮度不夠", "比較貴", "會有鬼影"], desc: "防災用品建議準備手電筒、LED手提燈、頭燈，較為安全。", bad: "💀 嚴重後果：餘震打翻蠟燭引發火災，你家不但沒電，現在連房子都燒光了。" },
        { c: "居家儲備", q: "簡易廁所可以用什麼製作？", a: "水桶、塑膠袋與貓砂/凝固劑", w: ["紙箱", "寶特瓶", "直接在地上解決"], desc: "手冊建議準備食品用塑膠袋、衛生紙等生活用品。", bad: "💀 嚴重後果：你隨地解決導致衛生環境惡化，全家人感染霍亂。" },
        { c: "避難包", q: "男性緊急避難包建議重量上限？", a: "15公斤", w: ["5公斤", "30公斤", "愈重愈好"], desc: "緊急避難包一般建議男性重量約 15 公斤。", bad: "💀 嚴重後果：你背了30公斤的包包，逃難時跑不動，成為活靶子。" },
        { c: "避難包", q: "女性緊急避難包建議重量上限？", a: "10公斤", w: ["3公斤", "20公斤", "15公斤"], desc: "緊急避難包一般建議女性重量約 10 公斤。", bad: "💀 嚴重後果：你背太重導致脊椎受傷，在沒有醫生的情況下痛不欲生。" },
        { c: "避難包", q: "緊急避難包應放在哪裡？", a: "玄關或大門口等隨手可得處", w: ["臥室衣櫃最深處", "廚房冰箱裡", "陽台雜物堆"], desc: "建議放置於大門口或玄關附近等隨手可取得之處。", bad: "💀 嚴重後果：地震後雜物倒塌，你根本拿不到放在衣櫃深處的避難包，只能空手逃難。" },
        { c: "避難包", q: "為什麼避難包需要定期檢查？", a: "確認物品是否過期或損壞", w: ["為了美觀", "政府規定", "怕忘記放哪"], desc: "建議每半年檢查一次，確保物品無損壞、遺漏或已屆使用期限需替換。", bad: "💀 嚴重後果：受傷時發現優碘乾掉、OK繃不黏，電池流湯，避難包完全廢掉。" },
        { c: "避難包", q: "家有嬰兒時，避難包需額外準備？", a: "奶粉、奶瓶、尿布", w: ["玩具車", "故事書", "學步車"], desc: "嬰幼兒需準備奶瓶、奶粉、尿布、嬰兒背帶等。", bad: "💀 嚴重後果：嬰兒因為沒奶粉喝而大哭，哭聲引來了敵軍或暴徒。" },
        { c: "避難包", q: "老人避難包需額外準備？", a: "柺杖、假牙、助聽器、常備藥", w: ["平板電腦", "茶具組", "盆栽"], desc: "高齡長者需準備柺杖、假牙、助聽器、老花眼鏡等。", bad: "💀 嚴重後果：長輩沒帶假牙無法進食，體力衰退，拖累全家逃生速度。" },
        { c: "避難包", q: "寵物避難包應包含？", a: "牽繩、外出籠、口糧、飲水", w: ["貓跳台", "魚缸", "寵物推車"], desc: "寵物需準備外出籠、寵物牽繩、寵物糧食等。", bad: "💀 嚴重後果：寵物沒有牽繩受驚嚇跑走，你為了追寵物而迷路，最後兩者都失蹤。" },
        { c: "避難包", q: "避難包內準備「收音機」是為了？", a: "網路斷訊時接收政府資訊", w: ["無聊聽音樂", "發出求救訊號", "當作行動電源"], desc: "你是否有一台可攜式收音機？知道緊急狀態時的收聽頻道嗎？這是為了獲取資訊。", bad: "💀 嚴重後果：網路斷了你不知道哪裡有空襲，傻傻跑進轟炸區。" },
        { c: "避難包", q: "哪些證件建議準備影本放入包中？", a: "身分證、健保卡、存摺", w: ["集點卡", "會員卡", "名片"], desc: "貴重物品包含身分證、健保卡、存摺及其他重要證件的影本。", bad: "💀 嚴重後果：災後無法證明身分，無法領取政府補助金或提領存款，身無分文。" },
        { c: "避難包", q: "避難包中的禦寒用品建議？", a: "鋁箔保暖毯、輕便雨衣", w: ["羽絨棉被", "電暖器", "厚重毛大衣"], desc: "禦寒用品可準備小毛毯或鋁毯、暖暖包、輕便外套及雨衣。", bad: "💀 嚴重後果：你帶了厚重棉被，吸水後重得要命，最後因為失溫凍死在路邊。" },
        { c: "避難包", q: "為什麼要準備打火機或火柴？", a: "生火取暖或煮沸水源", w: ["抽菸用", "放煙火", "照明用"], desc: "避難包清單中建議準備打火機、瑞士刀等工具。", bad: "💀 嚴重後果：無法生火煮沸生水，喝了生水導致痢疾，在野外拉到虛脫。" },
        { c: "避難包", q: "大力膠帶(Duct Tape)在避難時的用途？", a: "修補裝備、固定門窗、簡易包紮", w: ["貼在嘴巴上安靜", "當作裝飾", "除毛"], desc: "居家儲備建議準備布質膠帶，可用於多種修補用途。", bad: "💀 嚴重後果：鞋底掉了無法修補，赤腳走在碎玻璃上，雙腳爛掉無法行走。" },
        { c: "避難包", q: "螢光棒(Cyalume)相較於手電筒的優點？", a: "不需電池、防水且無火花(防氣爆)", w: ["比較亮", "可以重複使用", "可以吃"], desc: "手冊建議準備手電筒、電池，螢光棒則是另一種無需電池的備用光源選擇。", bad: "💀 嚴重後果：在瓦斯外洩時打開手電筒引發火花，直接氣爆被炸飛。" },
        { c: "警報避難", q: "防空警報「解除」的聲音特徵？", a: "一長聲，持續90秒", w: ["一短聲", "急促短聲", "完全沒聲音"], desc: "防空警報解除為一長聲 90 秒。", bad: "💀 嚴重後果：你聽錯警報，在空襲還沒結束時跑出去，被飛彈碎片擊中。" },
        { c: "警報避難", q: "防空避難的三大原則？", a: "地下優於地上、室內優於室外、遠離門窗", w: ["地上優於地下", "室外優於室內", "靠近窗戶"], desc: "避難原則為地下優於地上、室內優於室外、遠離外牆門窗。", bad: "💀 嚴重後果：你跑到頂樓看熱鬧，結果被衝擊波震飛墜樓。" },
        { c: "警報避難", q: "若來不及去避難所，家中哪裡較安全？", a: "無窗戶、有承重牆的房間或浴室", w: ["陽台", "廚房", "客廳落地窗旁"], desc: "若無法及時進入避難所，應避開門窗與外牆，選擇室內安全處。", bad: "💀 嚴重後果：你躲在落地窗旁，玻璃震碎後把你扎成了人體刺蝟。" },
        { c: "警報避難", q: "戶外遭遇空襲爆炸時的姿勢？", a: "背向爆炸、趴下、遮眼掩耳、嘴微張", w: ["拿手機錄影", "站立不動", "拔腿狂奔"], desc: "保持趴下姿勢、嘴巴微張、保護頭部、背對爆炸方向。", bad: "💀 嚴重後果：你閉著嘴巴，爆炸震波直接震破你的耳膜和肺部，內出血而亡。" },
        { c: "警報避難", q: "聽到海嘯警報，應往哪裡跑？", a: "往高處、往內陸移動", w: ["去海邊看浪", "躲在地下室", "開車上高速公路"], desc: "應往內陸、高處移動，遠離海岸邊。", bad: "💀 嚴重後果：你跑去地下室躲海嘯，結果地下室瞬間灌滿水，無處可逃溺斃。" },
        { c: "警報避難", q: "海嘯避難高度建議至少幾樓？", a: "3樓以上", w: ["2樓", "10樓", "地下室"], desc: "進行垂直避難為原則，建議高度為 3 層樓之上。", bad: "💀 嚴重後果：你只跑到2樓，結果海嘯浪高10公尺，直接把你捲走。" },
        { c: "警報避難", q: "發布海嘯警報後不應做什麼？", a: "去海邊觀浪、釣魚", w: ["往高處跑", "通知鄰居", "關閉瓦斯"], desc: "警報發布後應迅速往高處疏散，切勿前往海邊。", bad: "💀 嚴重後果：你以為海嘯很好看跑去海邊直播，結果成為海嘯第一排受害者。" },
        { c: "警報避難", q: "防空警報響起，室內應避免在哪？", a: "窗戶旁、陽台", w: ["廁所", "走廊", "地下室"], desc: "應遠離外牆門窗，以降低震波與飛散碎片造成的傷害。", bad: "💀 嚴重後果：你站在陽台抽菸，結果被炸彈破片削掉半個腦袋。" },
        { c: "警報避難", q: "海嘯來臨時為何不建議開車？", a: "容易塞車受困且可能被水淹沒", w: ["車子會壞掉", "比較耗油", "違反交通規則"], desc: "往內陸遠離海岸邊時，短距離建議不使用車輛，以免塞車。", bad: "💀 嚴重後果：你開車逃跑結果塞在車陣中，眼睜睜看著海嘯把整排車子吞沒。" },
        { c: "警報避難", q: "何處可查詢防空避難設施？", a: "警政服務App、防災e點通App", w: ["Google Play", "Youtube", "外送App"], desc: "下載警政服務App或消防防災e點通App，可掌握離家最近的防空避難設施。", bad: "💀 嚴重後果：空襲時你還在滑外送App找吃的，結果被炸死。" },
        { c: "警報避難", q: "海嘯來臨前的常見徵兆？", a: "海水異常快速退去(退潮)", w: ["海水變熱", "海鷗聚集", "天空變綠"], desc: "海嘯警報發布時，氣象署會提供相關資訊。", bad: "💀 嚴重後果：你看到海水退去跑去撿魚，結果下一秒被巨浪拍死。" },
        { c: "警報避難", q: "手機接收到「國家級警報」時應？", a: "冷靜閱讀內容並採取對應行動", w: ["立刻關機", "截圖發IG", "大聲尖叫"], desc: "收到警報訊息時，請不要緊張，依照簡訊指示展開行動。", bad: "💀 嚴重後果：你忙著截圖發IG限動，錯過了黃金避難時間，成為遺照。" },
        { c: "警報避難", q: "地震發生時在電梯內應？", a: "按下所有樓層按鈕，門開即出", w: ["向上跳", "趴在地上", "按求救鈴等待"], desc: "雖然手冊未詳述電梯情境，但一般防災原則是儘速離開電梯。停電可能導致電梯失效。", bad: "💀 嚴重後果：你沒有按樓層，結果停電被卡在半空中三天三夜，在黑暗中崩潰。" },
        { c: "急救互救", q: "CPR 的操作步驟？", a: "叫、叫、壓 (或叫、叫、壓+AED)", w: ["壓、壓、壓", "叫、跑、跳", "聽、看、停"], desc: "確認反應及呼吸、呼救與撥打119、CPR胸部按壓、使用AED。", bad: "💀 嚴重後果：你操作錯誤，不但沒救活人，還把傷患的肋骨全壓斷插進肺裡。" },
        { c: "急救互救", q: "CPR 胸部按壓的頻率？", a: "每分鐘100-120下", w: ["每分鐘60下", "每分鐘200下", "越慢越好"], desc: "按壓頻率為每分鐘 100-120 下，深度至少 5 公分。", bad: "💀 嚴重後果：你按太慢無效，按太快變成在按摩，病人腦死。" },
        { c: "急救互救", q: "AED 使用的第一步？", a: "打開電源", w: ["貼上貼片", "按下電擊", "人工呼吸"], desc: "使用 AED 的第一步是「打開電源」，接著依照語音指示操作。", bad: "💀 嚴重後果：你沒開電源就貼貼片，結果AED完全沒反應，看著病人失去心跳。" },
        { c: "急救互救", q: "大量出血時最優先的止血法？", a: "直接加壓止血", w: ["綁止血帶", "沖冷水", "抬高患肢"], desc: "大量出血時，應對傷口進行加壓止血，或使用止血帶。", bad: "💀 嚴重後果：你對噴血的傷口沖水，血流得更快，傷患五分鐘內失血過多死亡。" },
        { c: "急救互救", q: "若無制式止血帶，可用什麼替代？", a: "領帶、三角巾配合木棍", w: ["細繩", "衛生紙", "保鮮膜"], desc: "若無止血帶，可用圍巾、絲巾搭配長棍作為臨時止血帶。", bad: "💀 嚴重後果：你用細繩綁止血帶，結果割傷肌肉神經，傷患這條腿只能截肢。" },
        { c: "急救互救", q: "搬運傷患前的原則？", a: "除現場危險外，避免任意移動以免二度傷害", w: ["立刻搬走", "用力搖晃確認意識", "潑水叫醒"], desc: "若確有必要緊急搬離傷患，應謹慎搬運並固定受傷部位，避免造成二次傷害。", bad: "💀 嚴重後果：你硬拉傷患，導致他原本接好的頸椎斷裂，終身癱瘓。" },
        { c: "急救互救", q: "懷疑脊椎骨折時？", a: "不可隨意移動，等待救援", w: ["立刻揹起來送醫", "幫他按摩", "扶他坐起來"], desc: "搬運傷患需謹慎，避免二次傷害。", bad: "💀 嚴重後果：你把脊椎骨折的人揹起來，碎骨刺入脊隨，害他變成植物人。" },
        { c: "急救互救", q: "毒氣(化學災害)外洩時，往哪避難？", a: "上風處", w: ["下風處", "低窪處", "地下室"], desc: "遇到毒化物質災害，應以手帕、濕布遮住口鼻，往上風方向離開。", bad: "💀 嚴重後果：你往順風處跑，毒氣跑得比你快，你吸入毒氣口吐白沫倒地。" },
        { c: "急救互救", q: "核子事故「停、看、聽」的「停」是指？", a: "留在室內掩蔽，關閉門窗", w: ["停車熄火", "停止呼吸", "停止用電"], desc: "「停」是指應立即進入室內，關閉門窗。", bad: "💀 嚴重後果：你停在戶外看熱鬧，吸入大量輻射塵，幾年後罹癌。" },
        { c: "急救互救", q: "為何要學習急救？", a: "醫療資源緊繃時，自救互救能提高生存率", w: ["為了考證照", "為了加薪", "因為好玩"], desc: "危機來臨時，救護人員任務繁重，我們必須學會簡單的自救、互救能力。", bad: "💀 嚴重後果：家人受傷時你只能在旁邊哭，眼睜睜看著可以救活的人死去。" },
        { c: "急救互救", q: "燒燙傷的第一步處理？", a: "沖冷水降溫", w: ["塗牙膏", "塗醬油", "冰敷(直接用冰塊)"], desc: "燒燙傷處理口訣「沖、脫、泡、蓋、送」，第一步是沖大量乾淨冷水。", bad: "💀 嚴重後果：你塗牙膏導致傷口感染，清創時痛到讓你懷疑人生。" },
        { c: "急救互救", q: "止血帶綁上後，需要在傷患身上註記什麼？", a: "止血帶綁上的時間", w: ["傷患的名字", "血型", "受傷原因"], desc: "綁上止血帶後，需記錄止血帶開始使用的時間。", bad: "💀 嚴重後果：因為沒紀錄時間，止血帶綁太久導致組織壞死，整隻手必須截肢。" },
        { c: "急救互救", q: "服用「碘片」的主要功能？", a: "保護甲狀腺免受輻射傷害", w: ["治療輻射燒傷", "增加抵抗力", "淨化飲水"], desc: "核子事故時政府可能會發布服用碘片，但屬於藥品請勿擅自服用。", bad: "💀 嚴重後果：你亂吃碘片導致甲狀腺亢進，真正需要時卻已經產生抗藥性無效。" },
        { c: "急救互救", q: "懷疑中暑(熱衰竭)時應？", a: "移至陰涼處，鬆開衣物，補充水分", w: ["喝冰水", "立刻沖冷水澡", "吃退燒藥"], desc: "避難包清單中建議準備帽子、雨傘等防中暑物品。", bad: "💀 嚴重後果：你給中暑的人灌冰水，導致血管劇烈收縮，引發心律不整猝死。" },
        { c: "急救互救", q: "失溫(Hypothermia)的徵兆？", a: "顫抖停止、意識模糊、皮膚冰冷", w: ["大量流汗", "臉色潮紅", "呼吸急促"], desc: "注意保暖是為了防止失溫，避難包中建議準備保暖毯。", bad: "💀 嚴重後果：你誤以為顫抖停止是好轉，結果是因為失溫過度，心跳停止死亡。" },
        { c: "軍事應變", q: "看到不明武裝部隊時？", a: "保持冷靜、不挑釁、離開並通報", w: ["拍照上傳打卡", "上前詢問", "嘗試攻擊"], desc: "發現疑似軍隊活動，請儘速離開該危險區域，隱蔽於安全處。", bad: "💀 嚴重後果：你衝上去拍照，被敵軍當成間諜直接擊斃。" },
        { c: "軍事應變", q: "為何不能拍攝我軍動態上傳？", a: "會暴露位置，資敵且違法", w: ["因為阿兵哥害羞", "手機畫質太差", "流量不夠"], desc: "請勿隨意拍照錄影上傳我軍動態，以免置我軍於危險。", bad: "💀 嚴重後果：你上傳了照片，導致我軍陣地被敵方飛彈鎖定摧毀，你是害死國軍的兇手。" },
        { c: "軍事應變", q: "遭遇砲擊爆炸時應？", a: "背向爆炸點，迅速趴下掩蔽", w: ["站著看", "拿手機錄影", "大聲尖叫"], desc: "戶外遭遇攻擊時，應背對爆炸方向，保持趴下姿勢，嘴巴微張。", bad: "💀 嚴重後果：你站著錄影，結果被爆炸破片切斷頸動脈。" },
        { c: "軍事應變", q: "敵軍可能偽裝成？", a: "警察、郵差、平民進行破壞", w: ["外星人", "殭屍", "機器人"], desc: "敵軍可能偽裝成我軍，一般民眾可能難以辨別。", bad: "💀 嚴重後果：你幫偽裝的敵軍開門，結果全家被綁架當人質。" },
        { c: "軍事應變", q: "戰時哪些行為極度危險？", a: "好奇圍觀、使用閃光燈", w: ["在家睡覺", "聽收音機", "煮飯"], desc: "請勿隨意拍照錄影，並應儘速離開危險區域。", bad: "💀 嚴重後果：你開閃光燈拍照，成為敵軍狙擊手的完美靶心。" },
        { c: "軍事應變", q: "現代戰爭常見的非物理攻擊？", a: "網路攻擊、假訊息、破壞基礎設施", w: ["魔法攻擊", "雷射光束", "音波攻擊"], desc: "威脅包含大規模網路癱瘓、假訊息散播等。", bad: "💀 嚴重後果：你相信假訊息導致手機中毒，銀行存款被盜光。" },
        { c: "軍事應變", q: "若聽聞「政府已投降」？", a: "多為假訊息，應透過官方管道查證", w: ["立刻投降", "轉發給親友", "燒毀證件"], desc: "任何有關國家戰敗或政府宣布投降的訊息，都是假訊息。", bad: "💀 嚴重後果：你信了假消息把身分證燒掉，結果戰爭結束後你變成幽靈人口。" },
        { c: "軍事應變", q: "正確的戰時資訊來源？", a: "政府廣播、官方App", w: ["抖音", "小紅書", "路邊傳單"], desc: "可透過廣播（如警廣、漢聲）或派出所獲取正確資訊。", bad: "💀 嚴重後果：你聽信抖音上的假消息，跑到敵軍控制區自投羅網。" },
        { c: "軍事應變", q: "為何「地下優於地上」？", a: "地下室有土層保護，較能擋衝擊波", w: ["地下室比較涼", "地下室有訊號", "地下室比較暗"], desc: "防空避難原則為「地下優於地上」。", bad: "💀 嚴重後果：你躲在地上建築物，結果被爆炸衝擊波震碎內臟。" },
        { c: "軍事應變", q: "無地下室時，空襲躲哪？", a: "兩根柱子旁的牆角，避開玻璃", w: ["電梯裡", "頂樓", "陽台"], desc: "若無地下室，應選擇室內遠離外牆門窗處避難。", bad: "💀 嚴重後果：你躲在頂樓，結果直接被飛彈命中，灰飛煙滅。" },
        { c: "軍事應變", q: "戰時實施「燈火管制」是為了？", a: "避免光線暴露目標位置", w: ["節省電力", "讓民眾早點睡", "增加恐怖氣氛"], desc: "這是為了減少被敵軍發現的機率。手冊雖未詳述，但為戰時常見措施。", bad: "💀 嚴重後果：你家燈火通明，敵軍飛機以為是重要目標，投下一顆炸彈。" },
        { c: "軍事應變", q: "若必須在戰區移動，應選擇？", a: "貼近牆根、避開開闊地", w: ["走在大馬路中間", "穿著鮮豔衣服", "騎乘機車"], desc: "應立即隱蔽於安全、遠離門窗處，避免暴露於危險。", bad: "💀 嚴重後果：你穿著鮮豔衣服走在馬路中間，像個活動靶子一樣被射殺。" },
        { c: "軍事應變", q: "什麼是「第五縱隊」？", a: "潛伏在內部的敵方破壞份子", w: ["五個人的隊伍", "負責後勤的部隊", "網路駭客"], desc: "手冊提及可能會有「在地協力者」協助散播假訊息或進行破壞。", bad: "💀 嚴重後果：你把潛伏的破壞份子當好人，告訴他避難所位置，導致避難所被攻擊。" },
        { c: "資訊安全", q: "辨識假訊息的「3不1要」？", a: "不製造、不輕信、不轉傳、要查證", w: ["不看、不聽、不說、要睡覺", "要轉傳、要按讚、要分享", "不查證、不思考、不懷疑"], desc: "面對假訊息請堅持：不製造、不輕信、不轉傳、要查證。", bad: "💀 嚴重後果：你亂傳假消息，造成恐慌踩踏事件，間接殺死了無辜的人。" },
        { c: "資訊安全", q: "戰時假訊息的主要危害？", a: "動搖民心士氣、製造恐慌", w: ["浪費網路流量", "讓手機沒電", "眼睛疲勞"], desc: "敵方可能利用錯誤宣傳來分化、削弱我們保護自己的決心。", bad: "💀 嚴重後果：你因為假訊息而恐慌崩潰，在還沒看到敵人前就先精神失常。" },
        { c: "資訊安全", q: "路邊不明 QR Code 可以掃嗎？", a: "不可，可能含惡意程式", w: ["可以，可能是優惠券", "看圖片漂亮就掃", "掃完關掉就好"], desc: "守護資安原則之一：不亂掃 QR Code。", bad: "💀 嚴重後果：你掃了QR Code，手機被駭客控制，定位傳給敵軍，下一秒飛彈就來了。" },
        { c: "資訊安全", q: "哪些App可能有資安風險？", a: "部分中國軟體可能有後門", w: ["所有遊戲App", "計算機App", "鬧鐘App"], desc: "部分中國製 App 如 TikTok、小紅書等，可能涉及個資蒐集風險。", bad: "💀 嚴重後果：你的個資被敵國掌握，你的家人被威脅，你被迫成為間諜。" },
        { c: "資訊安全", q: "收到恐慌訊息應？", a: "先冷靜，至查核中心驗證", w: ["立刻轉傳", "刪除帳號", "大聲尖叫"], desc: "接收網路訊息，要存疑、謹慎查證。", bad: "💀 嚴重後果：你轉傳恐慌訊息，導致物資被搶購一空，真正需要的人買不到而餓死。" },
        { c: "資訊安全", q: "網路中斷如何查證？", a: "收聽收音機廣播", w: ["問路人", "看雲的形狀", "擲筊"], desc: "若網路中斷，可透過廣播（警廣、漢聲）獲得資訊。", bad: "💀 嚴重後果：你用擲筊決定逃生方向，結果神明沒保佑，你跑進了交戰區。" },
        { c: "資訊安全", q: "深偽技術(Deepfake)可能用來？", a: "偽造元首談話誤導民眾", w: ["修圖變美", "做特效電影", "做貼圖"], desc: "敵方可能發布深偽影片，斷章取義、散播陰謀論。", bad: "💀 嚴重後果：你相信偽造的投降影片，放棄抵抗，結果被敵軍俘虜。" },
        { c: "資訊安全", q: "常見的戰時謠言？", a: "誇大我軍傷亡、散布投降論", w: ["明天會下雨", "超市打折", "明星八卦"], desc: "任何有關國家戰敗或政府宣布投降的訊息，都是假訊息。", bad: "💀 嚴重後果：你被謠言嚇到自殺，結果隔天我軍就打勝仗了，你白死了。" },
        { c: "資訊安全", q: "隨意轉傳謠言的後果？", a: "成為幫兇，可能觸法", w: ["手機會爆炸", "會被扣錢", "會變胖"], desc: "請勿轉傳未經證實的訊息，以免成為敵人的幫兇。", bad: "💀 嚴重後果：你因為散布謠言被法辦，戰後還要面臨法律制裁，人生留汙點。" },
        { c: "資訊安全", q: "事實查核平台的功能？", a: "協助分辨真偽", w: ["提供遊戲攻略", "提供購物優惠", "聊天交友"], desc: "可利用「台灣事實查核中心」或「行政院即時新聞澄清專區」驗證。", bad: "💀 嚴重後果：你不查證就相信詐騙訊息，把救命錢都匯給了騙子。" },
        { c: "資訊安全", q: "為何要開啟雙重認證(2FA)？", a: "增加帳號被盜用的難度", w: ["登入比較快", "可以領取獎勵", "防止手機過熱"], desc: "手冊建議定期更新密碼，開啟雙重認證可進一步保護資安。", bad: "💀 嚴重後果：你的帳號被盜，駭客用你的名義發布投降宣言，你跳進黃河也洗不清。" },
        { c: "資訊安全", q: "釣魚簡訊(Phishing)的特徵？", a: "附帶不明連結，催促點擊", w: ["內容很長", "有很多表情符號", "沒有連結"], desc: "不點選不明連結，是避免中毒或被駭的重要原則。", bad: "💀 嚴重後果：你點了連結，手機所有資料被刪光，包括你家人的聯絡方式和避難地圖。" },
        { c: "民生居住", q: "住家全毀應前往？", a: "災民收容救濟站", w: ["便利商店", "公園", "警察局"], desc: "當住家毀損無法居住時，可至政府開設的救濟站。", bad: "💀 嚴重後果：你跑去便利商店，發現店員早就跑了，你坐在門口餓死。" },
        { c: "民生居住", q: "救濟站提供哪些服務？", a: "食宿、醫療、通訊、心理輔導", w: ["電影欣賞", "按摩服務", "吃到飽自助餐"], desc: "救濟站提供穩定的膳食、用水、通訊管道及心理輔導資源。", bad: "💀 嚴重後果：你期待有吃到飽自助餐，結果大失所望開始鬧事，被趕出救濟站。" },
        { c: "民生居住", q: "配售站的功能？", a: "依規定配給民生物資", w: ["販賣奢侈品", "發放現金", "舉辦抽獎"], desc: "政府會透過配售站提供民生必需品。", bad: "💀 嚴重後果：你以為配售站是百貨公司，排隊排半天只為了買名牌包，結果餓昏。" },
        { c: "民生居住", q: "停電時冰箱應？", a: "少開門，維持低溫", w: ["打開通風", "拔掉插頭", "清空食物"], desc: "冰箱可能因停電失效，裡面的食物無法長時間保存，應盡快食用。", bad: "💀 嚴重後果：你一直開冰箱看食物壞了沒，結果冷氣跑光，食物真的全部壞光光。" },
        { c: "民生居住", q: "為何停電常伴隨停水？", a: "加壓馬達沒電無法供水", w: ["水管破裂", "水源枯竭", "水公司下班"], desc: "以加壓馬達打水的住宅，可能會在停電後不久停水。", bad: "💀 嚴重後果：你以為水會一直來，沒儲水，結果停電後連沖馬桶的水都沒有。" },
        { c: "民生居住", q: "停電時哪些食物先吃？", a: "冷藏肉類、海鮮", w: ["罐頭", "泡麵", "白米"], desc: "冰箱內的食物無法長時間保存，應優先食用。", bad: "💀 嚴重後果：你先把罐頭吃光，結果等要吃海鮮時已經臭掉，沒東西可吃。" },
        { c: "民生居住", q: "停電時安全照明？", a: "手電筒、露營燈", w: ["蠟燭 (易火災)", "火把", "打火機"], desc: "建議準備手電筒、LED手提燈，既安全又方便。", bad: "💀 嚴重後果：你點火把照明，結果燒到窗簾，把整棟避難所都燒了。" },
        { c: "民生居住", q: "物資短缺時政府啟動？", a: "配售制度", w: ["拍賣會", "搶購大賽", "免費贈送"], desc: "政府會透過完善的配售機制提供全民生活必需。", bad: "💀 嚴重後果：你以為可以搶購，結果因為插隊被打，還被禁止領取物資。" },
        { c: "民生居住", q: "住大樓如何防停電受困？", a: "熟悉逃生梯、備妥鑰匙", w: ["準備降落傘", "住在電梯裡", "不回家"], desc: "電梯可能在停電時失效，應熟悉替代路線。", bad: "💀 嚴重後果：你沒帶鑰匙走逃生梯，結果被反鎖在逃生梯間，沒水沒電沒訊號。" },
        { c: "民生居住", q: "查詢配售站/救濟站？", a: "防災e點通App、區公所", w: ["Google Maps", "Uber", "臉書"], desc: "可使用消防防災e點通App的離線地圖取得救濟站與配售站位置。", bad: "💀 嚴重後果：你用Uber叫外送，結果沒人接單，你等到餓死。" },
        { c: "民生居住", q: "如何消毒飲用水(含氯漂白水比例)？", a: "1公升水加2滴(約0.1cc)漂白水", w: ["1:1比例", "整罐倒下去", "加沙拉脫"], desc: "此為一般應急知識，手冊主要強調儲備足夠的飲用水。", bad: "💀 嚴重後果：你倒整罐漂白水，喝下去食道腐蝕，送醫不治。" },
        { c: "民生居住", q: "使用滅火器的口訣？", a: "拉、瞄、壓、掃", w: ["沖、脫、泡、蓋、送", "停、看、聽", "壓、壓、壓"], desc: "這是基本的消防知識，雖然手冊未詳述，但為必備技能。", bad: "💀 嚴重後果：你不會用滅火器，把滅火器丟進火裡，結果爆炸讓火勢更大。" },
        { c: "民生居住", q: "火災時在濃煙中如何逃生？", a: "採低姿勢爬行，掩住口鼻", w: ["站立奔跑", "躲在廁所", "往頂樓跑"], desc: "這是基本的火場逃生原則。", bad: "💀 嚴重後果：你站著跑吸入兩口濃煙就昏迷，被燒成焦屍。" },
        { c: "心理調適", q: "危機時常見負面情緒？", a: "焦慮、恐慌、無助", w: ["興奮、快樂、放鬆", "想睡覺", "肚子餓"], desc: "出現緊張、焦慮、害怕等是很正常的反應。", bad: "💀 嚴重後果：你以為大家都很興奮，結果你的異常行為被誤認為是瘋子綁起來。" },
        { c: "心理調適", q: "降低焦慮的方法？", a: "深呼吸、專注當下、規律作息", w: ["大吃大喝", "熬夜", "狂刷手機"], desc: "維持良好的飲食、睡眠與運動習慣，有助於紓解壓力。", bad: "💀 嚴重後果：你狂刷手機看假新聞，焦慮到心臟病發作。" },
        { c: "心理調適", q: "如何避免「替代性創傷」？", a: "減少觀看災難新聞", w: ["一直看新聞", "去災難現場", "想像災難畫面"], desc: "減少閱讀新聞或網路資訊，避免過多資訊導致焦慮增加。", bad: "💀 嚴重後果：你一直看屍體照片，結果精神崩潰，最後也成為需要被救助的病人。" },
        { c: "心理調適", q: "孩子害怕時家長應？", a: "接納情緒、給予擁抱、誠實說明", w: ["責罵孩子", "騙他說沒事", "不理他"], desc: "傾聽孩子的焦慮，誠實解釋並大方討論。", bad: "💀 嚴重後果：你罵孩子膽小，孩子嚇到不敢說話，結果得了創傷後壓力症候群(PTSD)。" },
        { c: "心理調適", q: "如何向兒童解釋危機？", a: "用懂的語言，強調會陪伴保護", w: ["用恐怖故事嚇他", "說會死掉", "叫他自己看新聞"], desc: "誠實解釋、大方討論我們所面臨的危機。", bad: "💀 嚴重後果：你嚇孩子說會死掉，孩子崩潰大哭引來敵軍。" },
        { c: "心理調適", q: "轉移注意力的好方法？", a: "分配簡單任務、玩桌遊、運動", w: ["發呆", "睡覺", "吵架"], desc: "規劃家庭活動，轉移注意力，並放鬆心情。", bad: "💀 嚴重後果：你們全家在避難所吵架，被其他難民趕出去，流落街頭。" },
        { c: "心理調適", q: "為何維持作息重要？", a: "建立內在秩序與安全感", w: ["為了減肥", "為了省電", "因為無聊"], desc: "維持規律作息能保持健康，同時找到方式紓解壓力。", bad: "💀 嚴重後果：你日夜顛倒，在需要逃跑的時候體力不支，跑最後一名被抓。" },
        { c: "心理調適", q: "心理支持系統包括？", a: "親友、鄰居、宗教、專業諮商", w: ["陌生人", "詐騙集團", "AI機器人"], desc: "與家人、親近的朋友談論感受，維持連結以降低孤獨感。", bad: "💀 嚴重後果：你找詐騙集團訴苦，結果最後一點救命錢也被騙光。" },
        { c: "心理調適", q: "親友受驚嚇呆滯時？", a: "陪伴、給予溫水毛毯，不強迫說話", w: ["用力搖醒", "大聲喝斥", "潑冷水"], desc: "維持與親友的連結，必要時尋求專業協助。", bad: "💀 嚴重後果：你用力搖醒受驚嚇的親友，他以為你是敵人，一拳把你打昏。" },
        { c: "心理調適", q: "何時尋求專業心理協助？", a: "嚴重失眠、絕望、無法生活時", w: ["心情好時", "肚子餓時", "無聊時"], desc: "當焦慮嚴重影響生活時，應尋求專業心理機構協助。", bad: "💀 嚴重後果：你忽視嚴重憂鬱，最後在避難所自我了斷。" },
        { c: "心理調適", q: "「著地練習」(Grounding)是用來？", a: "緩解急性焦慮，回到當下", w: ["練習跳傘", "練習跌倒", "練習睡覺"], desc: "這是心理急救的一種技巧，有助於緩解急性焦慮。", bad: "💀 嚴重後果：你在避難所練習跳傘姿勢，被人當成神經病綁起來。" },
        { c: "政府求助", q: "緊急報案專線？", a: "110(警)、119(消/醫)、118(海)", w: ["111、222、333", "911 (美)", "007"], desc: "110為報警專線，119為消防救護，118為海巡專線。", bad: "💀 嚴重後果：你打了007，結果詹姆士龐德沒有來救你，你只能自生自滅。" },
        { c: "政府求助", q: "「112」專線用途？", a: "訊號不良時跨網救難專線", w: ["查號台", "氣象台", "訂餐專線"], desc: "112 為緊急救難專線。", bad: "💀 嚴重後果：你在山上受困打112訂餐，救援隊以為你在惡作劇，放棄搜救。" },
        { c: "政府求助", q: "電話網路癱瘓如何求助？", a: "前往派出所、消防隊", w: ["大聲尖叫", "在地上寫字", "放狼煙"], desc: "若通訊癱瘓，請改至附近派出所或村里辦公室獲取訊息。", bad: "💀 嚴重後果：你在都市放狼煙，引發森林大火，把自己和鄰居都燒死。" },
        { c: "政府求助", q: "聽語障人士報案？", a: "簡訊報案、視訊報案App", w: ["無法報案", "請路人幫忙", "大叫"], desc: "聽語障人士可使用簡訊報案（119/110）或視訊報案 App。", bad: "💀 嚴重後果：你嘗試大叫報案，結果因為發不出聲音，錯失救援機會。" },
        { c: "政府求助", q: "查詢防災地圖？", a: "防災e點通App", w: ["寶可夢Go", "Google Earth", "IG打卡"], desc: "下載消防防災e點通App，可查詢離線地圖與避難處所。", bad: "💀 嚴重後果：你開寶可夢Go找避難所，結果走到懸崖邊抓怪摔死。" },
        { c: "政府求助", q: "災時119佔線應？", a: "非緊急勿佔用，留給重症", w: ["一直打", "改打110", "放棄"], desc: "危機時救護量能有限，民眾應學會自救互救，珍惜醫療資源。", bad: "💀 嚴重後果：你因為擦傷一直打119，佔用線路，導致鄰居心臟病發無人可救。" },
        { c: "政府求助", q: "1991平台功能？", a: "報平安留言", w: ["訂便當", "叫計程車", "聽音樂"], desc: "1991 為報平安留言平台（手冊列出 1999, 1966, 1925 等專線）。", bad: "💀 嚴重後果：你用1991訂便當，家人找不到你以為你死了，把你報失蹤人口。" },
        { c: "政府求助", q: "為何約定「災後集合點」？", a: "通訊中斷時確保團聚", w: ["為了開派對", "為了拍照", "怕無聊"], desc: "通訊中斷時，有和家人約定好的集合處嗎？這是確保團聚的關鍵。", bad: "💀 嚴重後果：因為沒約定集合點，全家人失散，十年後你才在尋人啟事上看到他們。" },
        { c: "政府求助", q: "找不到資訊向誰求助？", a: "警消、民防人員、村里長", w: ["流浪漢", "便利商店店員", "網友"], desc: "可至附近派出所、村里辦公室獲取正確訊息。", bad: "💀 嚴重後果：你問網友哪裡安全，被騙去詐騙園區，器官被賣掉。" },
        { c: "政府求助", q: "家庭防災卡應包含？", a: "緊急聯絡人、集合點、避難所", w: ["Wifi密碼", "銀行密碼", "購物清單"], desc: "手冊建議自製緊急避難地圖，並寫下與家人的緊急會合地點。", bad: "💀 嚴重後果：防災卡上寫了Wifi密碼，結果逃難時沒網路，你完全聯絡不到家人。" },
        { c: "政府求助", q: "衛星電話的主要優勢？", a: "不依賴地面基地台，災時仍可用", w: ["通話費便宜", "體積小", "可以玩遊戲"], desc: "當地面通訊中斷時，衛星電話可作為替代通訊工具。", bad: "💀 嚴重後果：你買了玩具手機當衛星電話，災難時只能看著它發呆。" },
        { c: "政府求助", q: "建築物張貼「黃色危險標誌」代表？", a: "建築物需注意使用", w: ["建築物安全", "建築物需立刻拆除", "建築物出售中"], desc: "震災後政府會進行建築物評估，黃單代表需注意使用。", bad: "💀 嚴重後果：你以為黃色代表安全，開心住進去，結果餘震一來房子倒塌壓死你。" },
        { c: "政府求助", q: "建築物張貼「紅色危險標誌」代表？", a: "建築物危險，應暫時停止使用", w: ["喜氣洋洋", "歡迎參觀", "政府機關"], desc: "紅單代表建築物有危險，應暫時停止使用。", bad: "💀 嚴重後果：你以為紅色喜氣洋洋進去參觀，結果天花板塌下來把你活埋。" }
    ];

    let playerName = "";
    let playerSchool = "";
    let questionCount = 10;
    let currentQuestions = [];
    let wrongAnswers = [];
    let allAnswers = [];
    let currentIndex = 0;
    let score = 0;
    let startTime = 0;
    let gameMode = 'personal';

    // --- Init ---
    function selectCount(n) {
        questionCount = n;
        document.querySelectorAll('.mode-select-btn').forEach(b => b.classList.remove('selected'));
        if(document.getElementById(`btn-c-${n}`)) document.getElementById(`btn-c-${n}`).classList.add('selected');
        if(document.getElementById(`sch-btn-c-${n}`)) document.getElementById(`sch-btn-c-${n}`).classList.add('selected');
    }

    function toSchoolScreen() {
        showScreen('screen-school-login');
    }

    function backToStart() {
        showScreen('screen-start');
    }

    function startGame(mode) {
        let inputName, inputSchool, errorMsg;
        gameMode = mode;

        if (mode === 'school') {
            inputName = document.getElementById('player-team');
            inputSchool = document.getElementById('player-school');
            errorMsg = document.getElementById('school-error');
            
            if (!inputSchool.value.trim()) { showError(errorMsg, "請輸入學校名稱！"); return; }
            if (!inputName.value.trim()) { showError(errorMsg, "請輸入隊名或代表人！"); return; }
            
            playerSchool = inputSchool.value.trim();
            document.body.classList.add('mode-school');
        } else {
            inputName = document.getElementById('player-name');
            errorMsg = document.getElementById('start-error');
            if (!inputName.value.trim()) { showError(errorMsg, "請輸入您的名字！"); return; }
            
            playerSchool = ""; 
            document.body.classList.remove('mode-school');
        }
        
        playerName = inputName.value.trim();
        document.getElementById('quiz-player-name').innerText = playerName;

        if(errorMsg) errorMsg.style.display = 'none';

        let pool = JSON.parse(JSON.stringify(fullDB));
        while(pool.length < questionCount) pool = pool.concat(fullDB);
        currentQuestions = pool.sort(() => Math.random() - 0.5).slice(0, questionCount);
        
        wrongAnswers = [];
        allAnswers = [];
        currentIndex = 0;
        score = 0;
        startTime = Date.now();

        showScreen('screen-quiz');
        loadQuestion();
    }

    function showError(el, msg) {
        el.innerText = msg;
        el.style.display = 'block';
        setTimeout(() => { el.style.display = 'none'; }, 2000);
    }

    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        window.scrollTo(0,0); 
    }

    function loadQuestion() {
        document.getElementById('feedback-modal').style.display = 'none';

        const qData = currentQuestions[currentIndex];
        document.getElementById('quiz-progress').innerText = `${currentIndex + 1} / ${questionCount}`;
        document.getElementById('q-cat').innerText = qData.c;
        document.getElementById('q-text').innerText = qData.q;

        let opts = [{t: qData.a, correct: true}];
        let wrongs = qData.w ? [...qData.w] : ["錯誤選項"];
        wrongs.sort(() => Math.random() - 0.5).slice(0, 3).forEach(w => opts.push({t: w, correct: false}));
        opts.sort(() => Math.random() - 0.5);

        const list = document.getElementById('options-list');
        list.innerHTML = "";
        
        opts.forEach(opt => {
            let btn = document.createElement('div');
            btn.className = 'option-btn';
            btn.innerText = opt.t;
            btn.onclick = () => checkAnswer(btn, opt.correct, qData);
            list.appendChild(btn);
        });
    }

    function checkAnswer(btn, isCorrect, qData) {
        const all = document.querySelectorAll('.option-btn');
        all.forEach(b => b.style.pointerEvents = 'none');

        allAnswers.push({ q: qData.q, u: btn.innerText, a: qData.a, c: isCorrect ? 'O' : 'X' });

        if(isCorrect) {
            btn.classList.add('correct');
            score++;
            if(gameMode === 'challenge') {
                setTimeout(nextQuestion, 500);
            } else {
                setTimeout(() => showFeedback(true, qData), 500);
            }
        } else {
            btn.classList.add('wrong');
            wrongAnswers.push(qData);
            all.forEach(b => { if(b.innerText === qData.a) b.classList.add('correct'); });

            if(gameMode === 'challenge') {
                setTimeout(nextQuestion, 1000);
            } else {
                setTimeout(() => showFeedback(false, qData), 800);
            }
        }
    }

    function showFeedback(isCorrect, qData) {
        const modal = document.getElementById('feedback-modal');
        const title = document.getElementById('feedback-title');
        const content = document.getElementById('feedback-content');
        const consequenceArea = document.getElementById('consequence-area');

        consequenceArea.innerHTML = "";
        consequenceArea.style.display = 'none';

        if (isCorrect) {
            title.innerHTML = "⭕ 答對了！";
            title.style.color = "#006400"; 
        } else {
            title.innerHTML = "❌ 答錯了！";
            title.style.color = "#8B0000"; 
            if(qData.bad) {
                consequenceArea.style.display = 'block';
                consequenceArea.innerHTML = `<div class="consequence-box"><span class="consequence-title">⚠️ 如果選錯的下場：</span>${qData.bad}</div>`;
            }
        }

        content.innerHTML = `<strong style="color:#000; font-size:1.2rem; display:block; margin-bottom:15px;">✔ 正解：${qData.a}</strong>${qData.desc}`;
        modal.style.display = 'flex';
    }

    function nextQuestion() {
        currentIndex++;
        if(currentIndex < questionCount) {
            loadQuestion();
        } else {
            endGame();
        }
    }

    function endGame() {
        document.getElementById('feedback-modal').style.display = 'none';

        let finalScore = Math.round((score / questionCount) * 100);
        let timeUsed = Math.floor((Date.now() - startTime) / 1000);
        
        if(gameMode === 'school') {
            sendData(playerName, finalScore, timeUsed, "", wrongAnswers);
            document.getElementById('btn-csv-good').style.display = 'block';
            document.getElementById('btn-csv-bad').style.display = 'block';
            document.getElementById('school-good').style.display = 'block'; document.getElementById('school-good').innerText = playerSchool;
            document.getElementById('school-bad').style.display = 'block'; document.getElementById('school-bad').innerText = playerSchool;
        } else {
            document.getElementById('btn-csv-good').style.display = 'none';
            document.getElementById('btn-csv-bad').style.display = 'none';
            document.getElementById('school-good').style.display = 'none';
            document.getElementById('school-bad').style.display = 'none';
        }

        if (finalScore >= 60) {
            showScreen('screen-result-good');
            document.getElementById('score-good').innerText = finalScore;
            document.getElementById('correct-good').innerText = score;
            document.getElementById('time-good').innerText = timeUsed + "s";
            document.getElementById('name-good').innerText = playerName; 
        } else {
            document.body.classList.add('bad-end'); 
            showScreen('screen-result-bad');
            document.getElementById('score-bad').innerText = finalScore;
            document.getElementById('name-bad').innerText = playerName; 
        }
    }

    function sendData(name, score, time, rank, wrongList) {
        const formData = new FormData();
        formData.append(ENTRY_ID_SCHOOL, playerSchool);
        formData.append(ENTRY_ID_NAME, name);
        formData.append(ENTRY_ID_SCORE, score);
        formData.append(ENTRY_ID_TIME, time);
        
        let wrongText = wrongList.length > 0 ? wrongList.map(w => w.q).join(" | ") : "無 (全對)";
        formData.append(ENTRY_ID_WRONG, wrongText);

        fetch(GOOGLE_FORM_URL, {
            method: "POST",
            body: formData,
            mode: "no-cors"
        }).catch(err => { console.error("Data Error", err); });
    }

    function downloadCSV() {
        let csvContent = "\uFEFF"; 
        csvContent += `學校,姓名/隊名,分數,${playerSchool},${playerName},${Math.round((score / questionCount) * 100)}\n\n`;
        csvContent += "題目,學生選擇,正確答案,結果\n";
        allAnswers.forEach(row => {
            let q = `"${row.q.replace(/"/g, '""')}"`;
            let u = `"${row.u.replace(/"/g, '""')}"`;
            let a = `"${row.a.replace(/"/g, '""')}"`;
            csvContent += `${q},${u},${a},${row.c}\n`;
        });
        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = `生存測驗明細_${playerSchool}_${playerName}.csv`;
        link.click();
    }

    function showReview() {
        if(wrongAnswers.length === 0) {
            alert("🎉 完美全對！無需複習！");
            return;
        }
        const list = document.getElementById('review-list');
        list.innerHTML = "";
        wrongAnswers.forEach((item, index) => {
            let html = `
                <div class="review-item">
                    <span class="q-cat-label" style="font-size:0.8rem; margin-bottom:5px;">${item.c}</span>
                    <div style="font-size:1.1rem; font-weight:900; margin-bottom:5px;">${index + 1}. ${item.q}</div>
                    <div class="review-ans">✔ 正解：${item.a}</div>
                    <div class="review-desc">${item.desc}</div>
                </div>
            `;
            list.innerHTML += html;
        });
        showScreen('screen-review');
        window.scrollTo(0,0);
    }

    function backToResult() {
        if(document.body.classList.contains('bad-end')) {
            showScreen('screen-result-bad');
        } else {
            showScreen('screen-result-good');
        }
    }

    function downloadImage(elementId, bgColor) {
        const element = document.getElementById(elementId);
        const btn = event.target;
        const originalText = btn.innerText;
        btn.innerText = "🔄 處理中...";
        btn.disabled = true;

        const originalWidth = element.style.width;
        element.style.width = "800px"; 

        html2canvas(element, {
            scale: 2,
            useCORS: true,
            backgroundColor: bgColor,
            windowWidth: 1600
        }).then(canvas => {
            element.style.width = originalWidth; 
            const link = document.createElement('a');
            link.download = `生存測驗戰報_${playerName}.png`;
            link.href = canvas.toDataURL("image/png");
            link.click();
            btn.innerText = originalText;
            btn.disabled = false;
            
            const toast = document.getElementById('toast');
            toast.style.display = 'block';
            setTimeout(() => toast.style.display = 'none', 3000);
        }).catch(err => {
            console.error("生成失敗:", err);
            element.style.width = originalWidth;
            btn.innerText = "❌ 失敗";
            setTimeout(() => { btn.innerText = originalText; btn.disabled = false; }, 2000);
        });
    }

    // --- 特效功能 ---
    function fireworksEffect() {
        var duration = 3000;
        var animationEnd = Date.now() + duration;
        var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 9999 };

        var interval = setInterval(function() {
            var timeLeft = animationEnd - Date.now();
            if (timeLeft <= 0) { return clearInterval(interval); }
            var particleCount = 50 * (timeLeft / duration);
            confetti(Object.assign({}, defaults, { particleCount, origin: { x: Math.random(), y: Math.random() - 0.2 } }));
        }, 250);
    }

    function starsEffect() {
        var end = Date.now() + 2000;
        (function frame() {
            confetti({
                particleCount: 5,
                angle: 60,
                spread: 55,
                origin: { x: 0 },
                shapes: ['star'],
                colors: ['#FFFF00', '#FF0000'] 
            });
            confetti({
                particleCount: 5,
                angle: 120,
                spread: 55,
                origin: { x: 1 },
                shapes: ['star'],
                colors: ['#FFFF00', '#FF0000']
            });
            if (Date.now() < end) {
                requestAnimationFrame(frame);
            }
        }());
    }
</script>

</body>
</html>
